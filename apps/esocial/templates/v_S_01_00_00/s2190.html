
{% load esocial_custom_tags %}
{% with evtAdmPrelim=original.evento_json|readjson:'evtAdmPrelim' %}
<form id="form_json">

<div class="row">

<div id="evtAdmPrelim__div">
    <div class="col-md-12">
        <h4>Evento Registro Preliminar de Trabalhador.
Regras de validação:
REGRA_ADMISSAO_VALIDA_DT_ADM
REGRA_ADMISSAO_VALIDA_DURACAO_CONTRATO
REGRA_BLOQUEIA_USO_CPF_EMPREGADOR
REGRA_COMPATIBILIDADE_CATEGORIA_CLASSTRIB
REGRA_EMPREGADO_DOMESTICO
REGRA_ENVIO_PROC_FECHAMENTO
REGRA_EVENTOS_EXTEMP
REGRA_EXCLUSAO_ADMISSAO_PRELIMINAR
REGRA_EXISTE_INFO_EMPREGADOR
REGRA_MESMO_PROCEMI
REGRA_RETIFICA_MESMO_VINCULO
REGRA_VALIDA_ADMISSAO_PRELIMINAR
REGRA_VALIDA_EMPREGADOR
REGRA_VALIDA_MATRICULA</h4>
        {% if False %}
        <div class="btn-group">
            <button type="button" onclick="duplicateDiv($(this))" 
                    class="btn btn-success btn-flat">
                    <i class="fa fa-plus-circle"></i>
            </button>
            <button type="button" onclick="removeDiv($(this))" 
                    class="btn btn-danger btn-flat">
                    <i class="fa fa-minus-circle"></i>
            </button>
        </div>
        {% endif %}
    </div>
    <div class="col-md-12">
        <blockquote>
            <div class="row">

<div id="ideEvento__div">
    <div class="col-md-12">
        <h4>Informações de identificação do evento.</h4>
        {% if False %}
        <div class="btn-group">
            <button type="button" onclick="duplicateDiv($(this))" 
                    class="btn btn-success btn-flat">
                    <i class="fa fa-plus-circle"></i>
            </button>
            <button type="button" onclick="removeDiv($(this))" 
                    class="btn btn-danger btn-flat">
                    <i class="fa fa-minus-circle"></i>
            </button>
        </div>
        {% endif %}
    </div>
    <div class="col-md-12">
        <blockquote>
            <div class="row">

<div id="indRetif__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Informe [1] para arquivo original ou [2] para arquivo de retificação<a data-toggle="tooltip" title="Informe [1] para arquivo original ou [2] para arquivo de retificação.
Valores válidos:
1 - Original
2 - Retificação"><i class="fa fa-fw fa-question-circle"></i></a></label>
            <select id="evtAdmPrelim__ideEvento__id__indRetif" name="[evtAdmPrelim][ideEvento][indRetif]" onchange="set_evento_json()" class="form-control" {{ original|disabled}}>
            <option value="">---</option><option value='1' {% ifequal evtAdmPrelim|readjson:'ideEvento.indRetif'|to_str '1' %}selected{% endifequal %}>1 - Original</option><option value='2' {% ifequal evtAdmPrelim|readjson:'ideEvento.indRetif'|to_str '2' %}selected{% endifequal %}>2 - Retificação</option>
            </select>
        </div>
    </div>
</div>

<div id="nrRecibo__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Preencher com o número do recibo do arquivo a ser retificado<a data-toggle="tooltip" title="Preencher com o número do recibo do arquivo a ser retificado.
Validação: O preenchimento é obrigatório se indRetif = [2].
Deve ser um recibo de entrega válido, correspondente ao arquivo que está sendo retificado."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__ideEvento__id__nrRecibo" maxlength="23" value="{{evtAdmPrelim|readjson:'ideEvento.nrRecibo'}}" name="[evtAdmPrelim][ideEvento][nrRecibo]" onchange="set_evento_json()" class="form-control" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="tpAmb__div">
    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Identificação do ambiente</label>
            <select name="[evtAdmPrelim][ideEvento][tpAmb]" id="evtAdmPrelim__ideEvento__id__tpAmb_disabled" disabled="">
                <option value="">---------</option>
                <option value="1" {% ifequal original.tpamb 1 %}selected{% endifequal %}>1 - Produção</option>
                <option value="2" {% ifequal original.tpamb 2 %}selected{% endifequal %}>2 - Produção restrita.</option>
            </select>
            <input type="hidden" name="[evtAdmPrelim][ideEvento][tpAmb]" id="evtAdmPrelim__ideEvento__id__tpAmb" value="{{original.tpamb}}">
        </div>
    </div>
</div>
<div id="procEmi__div">
    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Processo de emissão do evento</label>
            <select name="[evtAdmPrelim][ideEvento][procEmi]" id="evtAdmPrelim__ideEvento__id__procEmi_disabled" disabled="">
                <option value="1" {% ifequal original.procemi 1 %}selected{% endifequal %}>1 - Aplicativo do empregador</option>
                <option value="2" {% ifequal original.procemi 2 %}selected{% endifequal %}>2 - Aplicativo governamental - Empregador Doméstico</option>
                <option value="3" {% ifequal original.procemi 3 %}selected{% endifequal %}>3 - Aplicativo governamental - Web Geral</option>
                <option value="4" {% ifequal original.procemi 4 %}selected{% endifequal %}>4 - Aplicativo governamental - Simplificado Pessoa Jurídica</option>
                <option value="5" {% ifequal original.procemi 5 %}selected{% endifequal %}>5 - Aplicativo governamental - Segurado Especial.</option>
            </select>
            <input type="hidden" name="[evtAdmPrelim][ideEvento][procEmi]" id="evtAdmPrelim__ideEvento__id__procEmi" value="{{original.procemi}}">
        </div>
    </div>
</div>
<div id="verProc__div">
    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Versão do processo de emissão do evento</label>
            <input type="text" name="[evtAdmPrelim][ideEvento][verProc]" value="{{original.verproc}}" class="vTextField" maxlength="20" id="evtAdmPrelim__ideEvento__id__verProc_disabled" disabled="">
            <input type="hidden" name="[evtAdmPrelim][ideEvento][verProc]" id="evtAdmPrelim__ideEvento__id__verProc" value="{{original.verproc}}">
        </div>
    </div>
</div>
            </div>
        </blockquote>
    </div>
</div>
<div id="ideEmpregador__div">
    <div class="col-md-12">
        <h4>Informações de identificação do empregador.</h4>
        {% if False %}
        <div class="btn-group">
            <button type="button" onclick="duplicateDiv($(this))" 
                    class="btn btn-success btn-flat">
                    <i class="fa fa-plus-circle"></i>
            </button>
            <button type="button" onclick="removeDiv($(this))" 
                    class="btn btn-danger btn-flat">
                    <i class="fa fa-minus-circle"></i>
            </button>
        </div>
        {% endif %}
    </div>
    <div class="col-md-12">
        <blockquote>
            <div class="row">

<div id="tpInsc__div">
    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Preencher com o código correspondente ao tipo de inscrição</label>
            <select name="[evtAdmPrelim][ideEmpregador][tpInsc]" id="evtAdmPrelim__ideEmpregador__id__tpInsc_disabled" disabled="">
                <option value="">---------</option>
                <option value="1" {% ifequal original.tpinsc 1 %}selected{% endifequal %}>1 - CNPJ</option>
                <option value="2" {% ifequal original.tpinsc 2 %}selected{% endifequal %}>2 - CPF</option>
                <option value="3" {% ifequal original.tpinsc 3 %}selected{% endifequal %}>3 - CAEPF (Cadastro de Atividade Econômica de Pessoa Física)</option>
                <option value="4" {% ifequal original.tpinsc 4 %}selected{% endifequal %}>4 - CNO (Cadastro Nacional de Obra)</option>
                <option value="5" {% ifequal original.tpinsc 5 %}selected{% endifequal %}>5 - CGC</option>
                <option value="6" {% ifequal original.tpinsc 6 %}selected{% endifequal %}>6 - CEI</option>
            </select>
            <input type="hidden" name="[evtAdmPrelim][ideEmpregador][tpInsc]" id="evtAdmPrelim__ideEmpregador__id__tpInsc" value="{{original.tpinsc}}">
        </div>
    </div>
</div>
<div id="nrInsc__div">
    <div class="col-md-4">
        <div class="form-group">
            <label class="control-label">Informar o número de inscrição do contribuinte de acordo com o tipo de inscrição indicado no campo ideEmpregador/tpInsc e conforme informado em S-1000</label>
            <input type="text" id="evtAdmPrelim__ideEmpregador__id__nrInsc_disabled" name="[evtAdmPrelim][ideEmpregador][nrInsc]" value="{{original.nrinsc}}" class="vTextField" maxlength="15" disabled="">
            <input type="hidden" name="[evtAdmPrelim][ideEmpregador][nrInsc]" id="evtAdmPrelim__ideEmpregador__id__nrInsc" value="{{original.nrinsc}}">
        </div>
    </div>
</div>
            </div>
        </blockquote>
    </div>
</div>
<div id="infoRegPrelim__div">
    <div class="col-md-12">
        <h4>Informações do registro preliminar do trabalhador.</h4>
        {% if False %}
        <div class="btn-group">
            <button type="button" onclick="duplicateDiv($(this))" 
                    class="btn btn-success btn-flat">
                    <i class="fa fa-plus-circle"></i>
            </button>
            <button type="button" onclick="removeDiv($(this))" 
                    class="btn btn-danger btn-flat">
                    <i class="fa fa-minus-circle"></i>
            </button>
        </div>
        {% endif %}
    </div>
    <div class="col-md-12">
        <blockquote>
            <div class="row">

<div id="cpfTrab__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Preencher com o número do CPF do trabalhador<a data-toggle="tooltip" title="Preencher com o número do CPF do trabalhador."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__id__cpfTrab" maxlength="11" value="{{evtAdmPrelim|readjson:'infoRegPrelim.cpfTrab'}}" name="[evtAdmPrelim][infoRegPrelim][cpfTrab]" onchange="set_evento_json()" class="form-control" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="dtNascto__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Preencher com a data de nascimento<a data-toggle="tooltip" title="Preencher com a data de nascimento."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__id__dtNascto" value="{{evtAdmPrelim|readjson:'infoRegPrelim.dtNascto'}}" name="[evtAdmPrelim][infoRegPrelim][dtNascto]" onchange="set_evento_json()" class="form-control automate-date" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="dtAdm__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Preencher com a data de admissão do trabalhador<a data-toggle="tooltip" title="Preencher com a data de admissão do trabalhador (ou data de início, no caso de Trabalhador Sem Vínculo de Emprego/Estatutário - TSVE).
Validação: Deve ser posterior à data de nascimento do trabalhador e igual ou posterior à data de início da obrigatoriedade dos eventos não periódicos para o empregador."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__id__dtAdm" value="{{evtAdmPrelim|readjson:'infoRegPrelim.dtAdm'}}" name="[evtAdmPrelim][infoRegPrelim][dtAdm]" onchange="set_evento_json()" class="form-control automate-date" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="matricula__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Matrícula atribuída ao trabalhador pela empresa ou<a data-toggle="tooltip" title="Matrícula atribuída ao trabalhador pela empresa.
Validação: O valor informado não pode conter a expressão 'eSocial' nas 7 (sete) primeiras posições.
Regra de validação:
REGRA_CARACTERE_ESPECIAL"><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__id__matricula" maxlength="30" value="{{evtAdmPrelim|readjson:'infoRegPrelim.matricula'}}" name="[evtAdmPrelim][infoRegPrelim][matricula]" onchange="set_evento_json()" class="form-control" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="codCateg__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Preencher com o código da categoria do trabalhador<a data-toggle="tooltip" title="Preencher com o código da categoria do trabalhador.
Validação: Deve ser um código de categoria sujeito ao Registro de Eventos Trabalhistas - RET de trabalhador não vinculado ao Regime Próprio de Previdência Social - RPPS, ou seja, "Empregado" ([1XX]), algumas categorias de "Agente Público" ([301, 302, 303, 304, 306, 307, 309, 310, 312]), "Avulso" ([2XX]), "Cessão" ([4XX]), algumas categorias de "Contribuinte Individual" ([721, 722, 723, 731, 734, 738, 761, 771]) ou de "Bolsista" ([901, 902])."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__id__codCateg" maxlength="3" value="{{evtAdmPrelim|readjson:'infoRegPrelim.codCateg'}}" name="[evtAdmPrelim][infoRegPrelim][codCateg]" onchange="set_evento_json()" class="form-control" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="natAtividade__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Natureza da atividade<a data-toggle="tooltip" title="Natureza da atividade.
Valores válidos:
1 - Trabalho urbano
2 - Trabalho rural
Validação: Preenchimento obrigatório se codCateg for relativo a "Empregado", "Agente Público", "Avulso" ou igual a [401, 731, 734, 738]. Não deve ser preenchido se codCateg = [721, 722, 771, 901].
Se codCateg = [104], deve ser preenchido com [1]. Se codCateg = [102], deve ser preenchido com [2]."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <select id="evtAdmPrelim__infoRegPrelim__id__natAtividade" name="[evtAdmPrelim][infoRegPrelim][natAtividade]" onchange="set_evento_json()" class="form-control" {{ original|disabled}}>
            <option value="">---</option><option value='1' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.natAtividade'|to_str '1' %}selected{% endifequal %}>1 - Trabalho urbano</option><option value='2' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.natAtividade'|to_str '2' %}selected{% endifequal %}>2 - Trabalho rural</option>
            </select>
        </div>
    </div>
</div>

<div id="infoRegCTPS__div">
    <div class="col-md-12">
        <h4>Informações referentes ao registro eletrônico de empregados e à Carteira de Trabalho e Previdência Digital - CTPS Digital.</h4>
        {% if False %}
        <div class="btn-group">
            <button type="button" onclick="duplicateDiv($(this))" 
                    class="btn btn-success btn-flat">
                    <i class="fa fa-plus-circle"></i>
            </button>
            <button type="button" onclick="removeDiv($(this))" 
                    class="btn btn-danger btn-flat">
                    <i class="fa fa-minus-circle"></i>
            </button>
        </div>
        {% endif %}
    </div>
    <div class="col-md-12">
        <blockquote>
            <div class="row">

<div id="CBOCargo__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Informar a Classificação Brasileira de Ocupações - CBO relativa ao cargo<a data-toggle="tooltip" title="Informar a Classificação Brasileira de Ocupações - CBO relativa ao cargo.
Validação: Deve ser um código válido e existente na tabela de CBO, com 6 (seis) posições."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__infoRegCTPS__id__CBOCargo" maxlength="6" value="{{evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.CBOCargo'}}" name="[evtAdmPrelim][infoRegPrelim][infoRegCTPS][CBOCargo]" onchange="set_evento_json()" class="form-control" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="vrSalFx__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Salário base do trabalhador<a data-toggle="tooltip" title="Salário base do trabalhador, correspondente à parte fixa da remuneração.
Validação: Se undSalFixo for igual a [7], preencher com 0 (zero)."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__infoRegCTPS__id__vrSalFx" maxlength="14" value="{{evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.vrSalFx'}}" name="[evtAdmPrelim][infoRegPrelim][infoRegCTPS][vrSalFx]" onchange="set_evento_json()" class="form-control esocial-valor-2" {{ original|disabled}} />
        </div>
    </div>
</div>

<div id="undSalFixo__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Unidade de pagamento da parte fixa da remuneração<a data-toggle="tooltip" title="Unidade de pagamento da parte fixa da remuneração.
Valores válidos:
1 - Por hora
2 - Por dia
3 - Por semana
4 - Por quinzena
5 - Por mês
6 - Por tarefa
7 - Não aplicável - Salário exclusivamente variável"><i class="fa fa-fw fa-question-circle"></i></a></label>
            <select id="evtAdmPrelim__infoRegPrelim__infoRegCTPS__id__undSalFixo" name="[evtAdmPrelim][infoRegPrelim][infoRegCTPS][undSalFixo]" onchange="set_evento_json()" class="form-control" {{ original|disabled}}>
            <option value="">---</option><option value='1' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '1' %}selected{% endifequal %}>1 - Por hora</option><option value='2' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '2' %}selected{% endifequal %}>2 - Por dia</option><option value='3' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '3' %}selected{% endifequal %}>3 - Por semana</option><option value='4' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '4' %}selected{% endifequal %}>4 - Por quinzena</option><option value='5' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '5' %}selected{% endifequal %}>5 - Por mês</option><option value='6' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '6' %}selected{% endifequal %}>6 - Por tarefa</option><option value='7' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.undSalFixo'|to_str '7' %}selected{% endifequal %}>7 - Não aplicável - Salário exclusivamente variável</option>
            </select>
        </div>
    </div>
</div>

<div id="tpContr__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Tipo de contrato de trabalho<a data-toggle="tooltip" title="Tipo de contrato de trabalho.
Valores válidos:
1 - Prazo indeterminado
2 - Prazo determinado, definido em dias
3 - Prazo determinado, vinculado à ocorrência de um fato"><i class="fa fa-fw fa-question-circle"></i></a></label>
            <select id="evtAdmPrelim__infoRegPrelim__infoRegCTPS__id__tpContr" name="[evtAdmPrelim][infoRegPrelim][infoRegCTPS][tpContr]" onchange="set_evento_json()" class="form-control" {{ original|disabled}}>
            <option value="">---</option><option value='1' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.tpContr'|to_str '1' %}selected{% endifequal %}>1 - Prazo indeterminado</option><option value='2' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.tpContr'|to_str '2' %}selected{% endifequal %}>2 - Prazo determinado, definido em dias</option><option value='3' {% ifequal evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.tpContr'|to_str '3' %}selected{% endifequal %}>3 - Prazo determinado, vinculado à ocorrência de um fato</option>
            </select>
        </div>
    </div>
</div>

<div id="dtTerm__div">
    <div class="col-md-4">
        <div class="form-group">
            <label>Data do término<a data-toggle="tooltip" title="Data do término do contrato por prazo determinado.
Validação: O preenchimento é obrigatório se tpContr = [2]. Não informar se tpContr = [1]. Deve ser igual ou posterior à data de admissão."><i class="fa fa-fw fa-question-circle"></i></a></label>
            <input type="text" id="evtAdmPrelim__infoRegPrelim__infoRegCTPS__id__dtTerm" value="{{evtAdmPrelim|readjson:'infoRegPrelim.infoRegCTPS.dtTerm'}}" name="[evtAdmPrelim][infoRegPrelim][infoRegCTPS][dtTerm]" onchange="set_evento_json()" class="form-control automate-date" {{ original|disabled}} />
        </div>
    </div>
</div>

            </div>
        </blockquote>
    </div>
</div>
            </div>
        </blockquote>
    </div>
</div>
            </div>
        </blockquote>
    </div>
</div>
</div>

</form>
{% endwith %}
{% if original.is_aberto %}
<script type="text/javascript">
function set_evento_json() {
    var dst = document.getElementById("id_evento_json");
    var dst_read = document.getElementById("id_evento_json_read");
    var obj = $('#form_json').serializeJSON({useIntKeysAsArrayIndex: true});
    dst.value = JSON.stringify(obj);
    dst_read.value = JSON.stringify(obj);
};
$(document).ready(function(){
    set_evento_json();
});
</script>
{% endif %}
